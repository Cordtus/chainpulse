# Example nginx configuration for WebSocket authentication proxy
# This proxy adds Basic Authentication headers to WebSocket connections

server {
    listen 8080;
    server_name localhost;

    location /websocket {
        # Target WebSocket endpoint
        proxy_pass https://pacific-1-skip-rpc.polkachu.com/websocket;
        
        # WebSocket upgrade headers
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        
        # Add Basic Authentication header
        # Replace with your base64-encoded credentials
        proxy_set_header Authorization "Basic c2tpcDpwMDFrYWNodT8h";
        
        # Forward other headers
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        
        # Timeouts
        proxy_read_timeout 86400;
        proxy_send_timeout 86400;
    }
}

# Usage:
# 1. Save this file as /etc/nginx/sites-available/chainpulse-proxy
# 2. Enable it: ln -s /etc/nginx/sites-available/chainpulse-proxy /etc/nginx/sites-enabled/
# 3. Reload nginx: nginx -s reload
# 4. Update chainpulse.toml to use: url = "ws://localhost:8080/websocket"